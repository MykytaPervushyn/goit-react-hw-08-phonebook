(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{106:function(t,e,n){t.exports={App:"App_App__1h37R",loader:"App_loader__39SvT"}},110:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(21),i=n.n(a),o=n(14),s=(n(56),n(4)),u=n(24),l=n.n(u),b=n(1),j=function(){return Object(b.jsxs)("nav",{children:[Object(b.jsx)(o.b,{to:"/",className:function(t){return t.isActive?l.a.active:l.a.link},children:"Home"}),Object(b.jsx)(o.b,{to:"/contacts",className:function(t){return t.isActive?l.a.active:l.a.link},children:"Contacts"})]})},d=n(7),f={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}};function O(){var t=Object(s.b)(),e=Object(s.c)(d.c.getUsername);return Object(b.jsxs)("div",{style:f.container,children:[Object(b.jsxs)("span",{style:f.name,children:["Welcome, ",e]}),Object(b.jsx)("button",{type:"button",onClick:function(){return t(d.a.logOut())},children:"Log out"})]})}var h=n(26),m=n.n(h);function p(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(o.b,{to:"/register",className:function(t){return t.isActive?m.a.active:m.a.link},children:"Sign up"}),Object(b.jsx)(o.b,{to:"/login",className:function(t){return t.isActive?m.a.active:m.a.link},children:"Sign in"})]})}var g={header:{display:"flex",justifyContent:"space-between",alignItems:"center",textDecoration:"none",padding:12,fontWeight:700,borderBottom:"1px solid #2A363B",fontSize:"18px"}};function x(){var t=Object(s.c)(d.c.getIsLoggedIn);return Object(b.jsxs)("header",{style:g.header,children:[Object(b.jsx)(j,{}),t?Object(b.jsx)(O,{}):Object(b.jsx)(p,{})]})}n(111),n(83),n(84),n(85);var v=n(31),C=n(2);function y(t){var e=t.children,n=t.redirectTo,c=void 0===n?"/":n;return Object(s.c)(d.c.getIsLoggedIn)?e:Object(b.jsx)(C.a,{to:c})}function _(t){var e=t.children,n=t.restricted,c=void 0!==n&&n,r=t.redirectTo,a=void 0===r?"/":r;return Object(s.c)(d.c.getIsLoggedIn)&&c?Object(b.jsx)(C.a,{to:a}):e}var k=n(36);n(106);function w(){var t=Object(s.b)(),e=Object(s.c)(d.c.getFetchingCurrent);Object(c.useEffect)((function(){t(d.a.fetchCurrentUser())}),[t]);var r=Object(c.lazy)((function(){return Promise.resolve().then(n.bind(null,83))})),a=Object(c.lazy)((function(){return Promise.resolve().then(n.bind(null,84))})),i=Object(c.lazy)((function(){return Promise.resolve().then(n.bind(null,85))})),o=Object(c.lazy)((function(){return Promise.resolve().then(n.bind(null,111))}));return Object(b.jsx)(v.a,{children:e?Object(b.jsx)(k.Audio,{heigth:"300",width:"300",color:"grey",arialLabel:"loading"}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(x,{}),Object(b.jsx)(c.Suspense,{fallback:Object(b.jsx)(k.Audio,{heigth:"300",width:"300",color:"grey",arialLabel:"loading"}),children:Object(b.jsxs)(C.d,{children:[Object(b.jsx)(C.b,{path:"/",element:Object(b.jsx)(_,{children:Object(b.jsx)(r,{})})}),Object(b.jsx)(C.b,{path:"/register",element:Object(b.jsx)(_,{restricted:!0,children:Object(b.jsx)(a,{})})}),Object(b.jsx)(C.b,{path:"/login",element:Object(b.jsx)(_,{redirectTo:"/contacts",restricted:!0,children:Object(b.jsx)(i,{})})}),Object(b.jsx)(C.b,{path:"/contacts",element:Object(b.jsx)(y,{redirectTo:"/login",children:Object(b.jsx)(o,{})})})]})})]})})}var N=n(5),L=n(47),S=n.n(L),A=n(17),F=n(48),I=n.n(F),z=n(20),U={key:"auth",storage:I.a,whitelist:["token"]},D=Object(N.a)({reducer:{auth:Object(A.g)(U,d.b),contacts:z.b},middleware:function(t){return t({serializableCheck:{ignoredActions:[A.a,A.f,A.b,A.c,A.d,A.e]}}).concat(S.a)},devTools:!1}),W=Object(A.h)(D),E=n(49);i.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(s.a,{store:D,children:Object(b.jsx)(E.a,{loading:null,persistor:W,children:Object(b.jsx)(o.a,{children:Object(b.jsx)(w,{})})})})}),document.getElementById("root"))},111:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return _}));var c=n(0),r=n(4),a=n(31),i=n(18),o=n(20),s=n(50),u=n(27),l=n.n(u),b=n(1);function j(){var t=Object(r.c)(i.d),e=Object(r.b)();return Object(b.jsx)("ul",{className:l.a.list,children:t.map((function(t){var n=t.id,c=t.name,r=t.number;return Object(b.jsxs)("li",{className:l.a.item,children:[Object(b.jsx)("p",{className:l.a.text,children:"".concat(c,": ").concat(r)}),Object(b.jsx)("button",{className:l.a.button,type:"button","aria-label":"Delete contact",onClick:function(){return function(t){return e(o.a.deleteContact(t))}(n)},children:Object(b.jsx)(s.a,{size:"30"})})]},n)}))})}var d=n(8),f=n(30),O=n(19),h=n.n(O);function m(){var t=Object(c.useState)(""),e=Object(d.a)(t,2),n=e[0],a=e[1],o=Object(c.useState)(""),s=Object(d.a)(o,2),u=s[0],l=s[1],j=Object(r.c)(i.b),O=Object(r.b)(),m=function(t){var e=t.target,n=e.name,c=e.value;switch(n){case"name":a(c);break;case"number":l(c);break;default:return}},p=function(){a(""),l("")};return Object(b.jsx)("form",{className:h.a.contactForm,onSubmit:function(t){return t.preventDefault(),j.find((function(t){return t.name===n}))?alert("".concat(n," is already in contacts"))||p():j.find((function(t){return t.number===u}))?alert("".concat(u," is already in contacts"))||p():(O(f.a.addContact({name:n,number:u})),void p())},children:Object(b.jsxs)("div",{className:h.a.formWrap,children:[Object(b.jsxs)("label",{className:h.a.label,children:["Name"," ",Object(b.jsx)("input",{className:h.a.input,type:"text",value:n,onChange:m,name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0})]}),Object(b.jsxs)("label",{className:h.a.label,children:["Number"," ",Object(b.jsx)("input",{className:h.a.input,type:"tel",value:u,onChange:m,name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0})]}),Object(b.jsx)("button",{className:h.a.button,type:"submit",children:"Add contact"})]})})}var p=n(3),g=n(34),x=n.n(g),v=function(){var t=Object(r.c)(i.c),e=Object(r.b)();return Object(b.jsxs)("label",{className:x.a.label,children:["Find contacts by name",Object(b.jsx)("input",{className:x.a.input,type:"text",value:t,onChange:function(t){return e(Object(p.d)(t.target.value))}})]})},C=n(35),y=n.n(C);function _(t){var e=Object(r.b)(),n=Object(r.c)(o.c.getLoading);return Object(c.useEffect)((function(){return e(o.a.fetchContacts())}),[e]),Object(b.jsx)("main",{children:Object(b.jsx)(a.a,{children:Object(b.jsxs)("div",{className:y.a.container,children:[Object(b.jsx)(m,{}),Object(b.jsxs)("div",{className:y.a.content,children:[Object(b.jsx)(v,{labelName:"Find contacts by name"}),n&&Object(b.jsx)("h1",{children:"Loading..."}),Object(b.jsx)(j,{})]})]})})})}},18:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return a}));var c=function(t){return t.contacts.items},r=function(t){return t.contacts.filter},a=function(t){var e=c(t),n=r(t).toLowerCase();return e.filter((function(t){return t.name.toLowerCase().includes(n)}))},i={getLoading:function(t){return t.contacts.loading},getFilter:r,getVisibleContacts:a,getTotalContactCount:function(t){return c(t).length}};e.a=i},19:function(t,e,n){t.exports={contactForm:"ContactForm_contactForm__1TWqf",formWrap:"ContactForm_formWrap__3An1U",label:"ContactForm_label__2s0tC",input:"ContactForm_input__3fgn0",button:"ContactForm_button__183O0"}},20:function(t,e,n){"use strict";n.d(e,"a",(function(){return i.a})),n.d(e,"c",(function(){return o.a})),n.d(e,"b",(function(){return p}));var c,r,a,i=n(30),o=n(18),s=n(51),u=n(6),l=n(9),b=n(5),j=n(15),d=n(3),f=Object(b.d)(!1,(c={},Object(u.a)(c,d.i,(function(){return!0})),Object(u.a)(c,d.j,(function(){return!1})),Object(u.a)(c,d.h,(function(){return!1})),Object(u.a)(c,d.b,(function(){return!0})),Object(u.a)(c,d.c,(function(){return!1})),Object(u.a)(c,d.a,(function(){return!1})),Object(u.a)(c,d.f,(function(){return!0})),Object(u.a)(c,d.g,(function(){return!1})),Object(u.a)(c,d.e,(function(){return!1})),c)),O=Object(b.d)([],(r={},Object(u.a)(r,d.j,(function(t,e){return e.payload})),Object(u.a)(r,d.c,(function(t,e){var n=e.payload;return[].concat(Object(s.a)(t),[n])})),Object(u.a)(r,d.g,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),h=Object(b.d)("",Object(u.a)({},d.d,(function(t,e){return e.payload}))),m=Object(b.d)(null,(a={},Object(u.a)(a,d.h,(function(t,e){var n=e.payload;return j.a.error(n)})),Object(u.a)(a,d.a,(function(t){return console.log(t)})),Object(u.a)(a,d.e,(function(t){return console.log(t)})),a)),p=Object(l.b)({loading:f,items:O,filter:h,error:m})},24:function(t,e,n){t.exports={link:"Navigation_link__1L53a",active:"Navigation_active__1EV0D Navigation_link__1L53a"}},26:function(t,e,n){t.exports={link:"AuthNav_link__2J8CY",active:"AuthNav_active__2Yvl0"}},27:function(t,e,n){t.exports={list:"ContactList_list__3tb_0",item:"ContactList_item__25XdA",text:"ContactList_text__Dz4RV",button:"ContactList_button__3mtDN"}},3:function(t,e,n){"use strict";n.d(e,"i",(function(){return r})),n.d(e,"j",(function(){return a})),n.d(e,"h",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return b})),n.d(e,"e",(function(){return j})),n.d(e,"d",(function(){return d}));var c=n(5),r=Object(c.b)("contacts/fetchContactsRequest"),a=Object(c.b)("contacts/fetchContactsSuccess"),i=Object(c.b)("contacts/fetchContactsError"),o=Object(c.b)("contacts/addContactRequest"),s=Object(c.b)("contacts/addContactSuccess"),u=Object(c.b)("contacts/addContactError"),l=Object(c.b)("contacts/deleteContactRequest"),b=Object(c.b)("contacts/deleteContactSuccess"),j=Object(c.b)("contacts/deleteContactError"),d=Object(c.b)("contacts/changeFilter")},30:function(t,e,n){"use strict";var c=n(13),r=n.n(c),a=n(15),i=n(3),o={fetchContacts:function(){return function(t){t(Object(i.i)()),r.a.get("/contacts").then((function(e){var n=e.data;return t(Object(i.j)(n))})).catch((function(e){return t(Object(i.h)(e.message))}))}},addContact:function(t){var e=t.name,n=t.number;return function(t){var c={name:e,number:n};t(Object(i.b)()),r.a.post("/contacts",c).then((function(e){var n=e.data;t(Object(i.c)(n)),a.a.success("Contact successfully created")})).catch((function(e){return t(Object(i.a)(e.message))}))}},deleteContact:function(t){return function(e){e(Object(i.f)()),r.a.delete("/contacts/".concat(t)).then((function(){e(Object(i.g)(t)),a.a.success("Contact successfully deleted")})).catch((function(t){return e(Object(i.e)(t.message))}))}}};e.a=o},31:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var c=n(46),r=n.n(c),a=n(1);function i(t){var e=t.children;return Object(a.jsx)("div",{className:r.a.container,children:e})}},34:function(t,e,n){t.exports={label:"Filter_label__7OCb7",input:"Filter_input__2pvLh"}},35:function(t,e,n){},46:function(t,e,n){t.exports={container:"Container_container__3JY6a"}},56:function(t,e,n){},7:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return x}));var c=n(16),r=n.n(c),a=n(25),i=n(13),o=n.n(i),s=n(5),u=n(15);o.a.defaults.baseURL="https://connections-api.herokuapp.com/";var l,b=function(t){o.a.defaults.headers.common.Authorization="Bearer ".concat(t)},j=function(){o.a.defaults.headers.common.Authorization=""},d=Object(s.c)("auth/register",function(){var t=Object(a.a)(r.a.mark((function t(e){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("/users/signup",e);case 3:return n=t.sent,c=n.data,b(c.token),t.abrupt("return",c);case 9:t.prev=9,t.t0=t.catch(0),u.a.error(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),f=Object(s.c)("auth/login",function(){var t=Object(a.a)(r.a.mark((function t(e){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("/users/login",e);case 3:return n=t.sent,c=n.data,b(c.token),t.abrupt("return",c);case 9:t.prev=9,t.t0=t.catch(0),u.a.error(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),O=Object(s.c)("auth/logout",Object(a.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("/users/logout");case 3:j(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),u.a.error(t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))),h=Object(s.c)("auth/refresh",function(){var t=Object(a.a)(r.a.mark((function t(e,n){var c,a,i,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.getState(),null!==(a=c.auth.token)){t.next=5;break}return console.log("\u0422\u043e\u043a\u0435\u043d\u0430 \u043d\u0435\u0442, \u0443\u0445\u043e\u0434\u0438\u043c \u0438\u0437 fetchCurrentUser"),t.abrupt("return",n.rejectWithValue());case 5:return b(a),t.prev=6,t.next=9,o.a.get("/users/current");case 9:return i=t.sent,s=i.data,t.abrupt("return",s);case 14:t.prev=14,t.t0=t.catch(6),u.a.error(t.t0.message);case 17:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e,n){return t.apply(this,arguments)}}()),m={register:d,logOut:O,logIn:f,fetchCurrentUser:h},p={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUsername:function(t){return t.auth.user.name},getFetchingCurrent:function(t){return t.auth.isFetchingCurrentUser}},g=n(6),x=Object(s.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCarrentUser:!1},extraReducers:(l={},Object(g.a)(l,m.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(g.a)(l,m.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(g.a)(l,m.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(g.a)(l,m.fetchCurrentUser.pending,(function(t){t.isFetchingCurrentUser=!0})),Object(g.a)(l,m.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0,t.isFetchingCurrentUser=!1})),Object(g.a)(l,m.fetchCurrentUser.rejected,(function(t){t.isFetchingCurrentUser=!1})),l)}).reducer},83:function(t,e,n){"use strict";n.r(e);n(0);var c=n(1),r={container:{minHeight:"calc(100vh - 50px)",display:"flex",alignItems:"center",justifyContent:"center"},title:{fontWeight:500,fontSize:48,textAlign:"center"}};e.default=function(){return Object(c.jsx)("div",{style:r.container,children:Object(c.jsxs)("h1",{style:r.title,children:["Welcome to our phonebook"," ",Object(c.jsx)("span",{role:"img","aria-label":"\u0418\u043a\u043e\u043d\u043a\u0430 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f",children:"\ud83d\udc81\u200d\u2640\ufe0f"})]})})}},84:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return u}));var c=n(8),r=n(0),a=n(4),i=n(7),o=n(1),s={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};function u(){var t=Object(a.b)(),e=Object(r.useState)(""),n=Object(c.a)(e,2),u=n[0],l=n[1],b=Object(r.useState)(""),j=Object(c.a)(b,2),d=j[0],f=j[1],O=Object(r.useState)(""),h=Object(c.a)(O,2),m=h[0],p=h[1],g=function(t){var e=t.target,n=e.name,c=e.value;switch(n){case"name":return l(c);case"email":return f(c);case"password":return p(c);default:return}};return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Sign up page"}),Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(i.a.register({name:u,email:d,password:m})),l(""),f(""),p("")},style:s.form,autoComplete:"off",children:[Object(o.jsxs)("label",{style:s.label,children:["Name",Object(o.jsx)("input",{type:"text",name:"name",value:u,onChange:g})]}),Object(o.jsxs)("label",{style:s.label,children:["Email",Object(o.jsx)("input",{type:"email",name:"email",value:d,onChange:g})]}),Object(o.jsxs)("label",{style:s.label,children:["Password",Object(o.jsx)("input",{type:"password",name:"password",value:m,onChange:g})]}),Object(o.jsx)("button",{type:"submit",children:"Sign up"})]})]})}},85:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return u}));var c=n(8),r=n(0),a=n(4),i=n(7),o=n(1),s={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};function u(){var t=Object(a.b)(),e=Object(r.useState)(""),n=Object(c.a)(e,2),u=n[0],l=n[1],b=Object(r.useState)(""),j=Object(c.a)(b,2),d=j[0],f=j[1],O=function(t){var e=t.target,n=e.name,c=e.value;switch(n){case"email":return l(c);case"password":return f(c);default:return}};return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Sign in page"}),Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(i.a.logIn({email:u,password:d})),l(""),f("")},style:s.form,autoComplete:"off",children:[Object(o.jsxs)("label",{style:s.label,children:["Email",Object(o.jsx)("input",{type:"email",name:"email",value:u,onChange:O})]}),Object(o.jsxs)("label",{style:s.label,children:["Password",Object(o.jsx)("input",{type:"password",name:"password",value:d,onChange:O})]}),Object(o.jsx)("button",{type:"submit",children:"Sign in"})]})]})}}},[[110,1,2]]]);
//# sourceMappingURL=main.9c9034f4.chunk.js.map